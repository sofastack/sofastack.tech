---
title: "ç”¨å®‰å…¨è®¡ç®—ä¿æŠ¤å…³é”®ä¸šåŠ¡"
author: "é¡¾å®—æ•"
authorlink: "https://github.com/sofastack"
description: "ç”¨å®‰å…¨è®¡ç®—ä¿æŠ¤å…³é”®ä¸šåŠ¡"
categories: "SOFAStack"
tags: ["SOFAStack"]
date: 2021-06-01T15:00:00+08:00
cover: "https://gw.alipayobjects.com/mdn/rms_1c90e8/afts/img/A*TSIGQ7MiwSAAAAAAAAAAAAAAARQnAQ"
---

### ä»€ä¹ˆæ˜¯å®‰å…¨è®¡ç®—ï¼Ÿ

Linux åŸºé‡‘ä¼šæ——ä¸‹çš„å®‰å…¨è®¡ç®—è”ç›Ÿå¯¹å®‰å…¨è®¡ç®—ä¸‹äº†ä¸€ä¸ªå®šä¹‰ï¼š

> Confidential Computing protects data in use by performing computation in a hardware-based Trusted Execution Environment.
Confidential Computing Consortium

åœ¨è¿™ä¸ªå®šä¹‰ä¸­å¼ºè°ƒäº†è¿™ä¹ˆå‡ ç‚¹ï¼š

1.å®‰å…¨è®¡ç®—ä¿æŠ¤çš„æ˜¯è¿ç®—è¿‡ç¨‹ä¸­çš„æ•°æ®å®‰å…¨;

2.å®‰å…¨è®¡ç®—éœ€è¦å€ŸåŠ©ç¡¬ä»¶çš„èƒ½åŠ›ã€‚

ä¸‹é¢å°±å¯¹è¿™ä¸¤ç‚¹åšä¸€ä¸ªé˜è¿°ï¼š
åœ¨äº‘è®¡ç®—åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠäº‘è®¡ç®—ç®€åŒ–ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šæ•°æ®çš„ä¼ è¾“ï¼Œæ•°æ®çš„è¿ç®—å’Œæ•°æ®çš„å­˜å‚¨ã€‚

> ![](https://gw.alipayobjects.com/mdn/sofastack/afts/img/A*nBdvRIoRVXEAAAAAAAAAAAAAARQnAQ)

è¿™ä¸ªä¸‰ä¸ªéƒ¨åˆ†çš„å®‰å…¨è§£å†³æ–¹æ¡ˆçš„å®Œæ•´åº¦æ˜¯æœ‰å·®åˆ«çš„ã€‚åœ¨æ•°æ®çš„ä¼ è¾“çŽ¯èŠ‚ï¼Œä¸šç•Œæœ‰å¾ˆå®Œæ•´çš„å®‰å…¨æ ‡å‡†å’Œå®žçŽ°æ¯”å¦‚ SSLï¼Œ TLSã€‚åœ¨æ•°æ®å­˜å‚¨çŽ¯èŠ‚ï¼Œå¯†ç å­¦ä¹Ÿæä¾›äº†éžå¸¸å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°æ®ç”¨æ°å½“çš„æ–¹å¼åŠ å¯†ä»¥åŽä¿å­˜ï¼Œé˜²æ­¢åœ¨å­˜å‚¨çŽ¯èŠ‚æ³„å¯†ã€‚åœ¨æ•°æ®çš„è¿ç®—çŽ¯èŠ‚ï¼Œè¿˜æ²¡æœ‰å’Œå…¶ä»–ä¸¤ä¸ªçŽ¯èŠ‚é‚£æ ·å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚å®‰å…¨è®¡ç®—æ­£æ˜¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ä¸ºç›®æ ‡çš„ã€‚

### å®‰å…¨è®¡ç®—æ˜¯å¦‚ä½•å®žçŽ°çš„å‘¢ï¼Ÿ

æˆ‘ä»¬ä»¥è‹±ç‰¹å°”çš„ SGX æŠ€æœ¯ä¸ºä¾‹æ¥çœ‹ä¸€ä¸‹å…·ä½“çš„æŠ€æœ¯æ–¹æ¡ˆã€‚

> ![](https://gw.alipayobjects.com/mdn/sofastack/afts/img/A*VXtTSJ-O9goAAAAAAAAAAAAAARQnAQ)

è‹±ç‰¹å°”çš„ SGX æŠ€æœ¯æ˜¯å°† CPU ä½œä¸ºè¿ç®—çš„ä¿¡ä»»èµ·ç‚¹ï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­æž„å»ºå®‰å…¨çš„è¿ç®—çŽ¯å¢ƒï¼ˆé£žåœ°ï¼‰ã€‚ä»Žè®¡ç®—æœºå‘æ˜Žçš„é‚£ä¸€å¤©èµ·ï¼Œæˆ‘ä»¬å°±å‡è®¾ CPU ä¼šæŒ‰ç…§è½¯ä»¶çš„æŒ‡ä»¤æ­£ç¡®åœ°æ‰§è¡Œï¼Œåªæ˜¯æ²¡æœ‰å¼ºè°ƒè¿™ä¸€ç‚¹ã€‚åœ¨è½¯ä»¶å¤§å‘å±•çš„ä»Šå¤©ï¼Œå„ç§è½¯ä»¶åœ¨ä¸€å°ç¡¬ä»¶ä¸Šåä½œè¿è¡Œï¼Œæ•´ä¸ªç”Ÿæ€è¶Šæ¥è¶Šå¤æ‚ï¼Œæ¶æ„è½¯ä»¶ä¹Ÿå‡ºçŽ°äº†ã€‚ä¸ºäº†é˜²æ­¢æ¶æ„è½¯ä»¶çš„ç ´åï¼ŒCPU ä¸ºéœ€è¦ä¿æŠ¤çš„åº”ç”¨éš”ç¦»å‡ºä¸€ä¸ªç‹¬ç«‹çš„é£žåœ°çŽ¯å¢ƒã€‚é£žåœ°å¤–çš„åº”ç”¨æ—¢ä¸èƒ½è§‚å¯Ÿä¹Ÿä¸èƒ½ä¿®æ”¹é£žåœ°ä¸­çš„ä»£ç å’Œæ•°æ®ï¼Œä»Žè€Œä¿è¯äº†é£žåœ°ä¸­çš„æ•°æ®å®‰å…¨ã€‚CPU å¯¹é£žåœ°çš„ä¿æŠ¤éžå¸¸å¼ºï¼Œå³ä½¿æ˜¯æ‹¥æœ‰é«˜ç‰¹æƒçš„æ“ä½œç³»ç»Ÿå’Œè™šæ‹ŸåŒ–ç®¡ç†è½¯ä»¶ä¹Ÿæ— æ³•çªç ´è¿™ç§ä¿æŠ¤ã€‚äº‹å®žä¸Šï¼Œä¸ä»…ä»…å¯ä»¥é˜²è½¯ä»¶çš„æ”»å‡»ï¼Œå“ªæ€•æ˜¯å¤–å›´ç¡¬ä»¶æä¾›è€…ï¼ˆæ¯”å¦‚ï¼šä¸»æ¿åˆ¶é€ è€…ï¼Œå†…å­˜æä¾›è€…ï¼‰éƒ½æ— æ³•çªç ´è¿™ä¸ªä¿æŠ¤ã€‚

è‹±ç‰¹å°” SGX æ˜¯ç›®å‰æœ€æˆç†Ÿçš„å®‰å…¨è®¡ç®—äº§å“ï¼Œä½†å¹¶ä¸æ˜¯å”¯ä¸€çš„å®‰å…¨è®¡ç®—äº§å“ã€‚å…¶ä»–ç¡¬ä»¶åŽ‚å•†å¦‚ AMDï¼ŒARMï¼ŒNvidia éƒ½åœ¨æŽ¨å‡ºå®‰å…¨è®¡ç®—äº§å“ã€‚æ‰€æœ‰è¿™äº›äº§å“éƒ½æ˜¯è½¯ç¡¬ä»¶ä¸€ä½“çš„è§£å†³æ–¹æ¡ˆï¼Œæ€»ç»“èµ·æ¥æœ‰ä»¥ä¸‹è¿™äº›ç‰¹ç‚¹ï¼š

> ![](https://gw.alipayobjects.com/mdn/sofastack/afts/img/A*qhNzR7MAOYsAAAAAAAAAAAAAARQnAQ)

åœ¨äº†è§£äº†å®‰å…¨è®¡ç®—çš„æ¦‚å¿µåŽï¼Œä»‹ç»ä¸€äº›å®‰å…¨è®¡ç®—çš„å…¸åž‹åœºæ™¯ï¼š

> ![](https://gw.alipayobjects.com/mdn/sofastack/afts/img/A*kZLuQLWj6fIAAAAAAAAAAAAAARQnAQ)

æœ‰äº†å®‰å…¨è®¡ç®—çŽ¯å¢ƒï¼Œç”¨æˆ·å¯ä»¥æ”¾å¿ƒåœ°å°†åº”ç”¨æ”¾åˆ°å…±æœ‰äº‘è®¡ç®—çŽ¯å¢ƒä¸­ï¼Œè®¡ç®—ä¸­ç”¨åˆ°çš„æ•°æ®å’Œè®¡ç®—çš„ç»“æžœéƒ½å¯ä»¥åŠ å¯†ä¼ è¾“ã€‚è¿™æ ·å¯ä»¥ç»Ÿä¸€åŸºç¡€è®¾æ–½çš„æž¶æž„ï¼Œé¿å…å¤æ‚çš„æ··åˆäº‘éƒ¨ç½²æ–¹å¼ã€‚

> ![](https://gw.alipayobjects.com/mdn/sofastack/afts/img/A*snJnSIFT1-oAAAAAAAAAAAAAARQnAQ)

äº‘ä¸Šçš„æ•°æ®äº¤æ˜“å’Œæ•°æ®æœåŠ¡ä¹Ÿæˆä¸ºäº†å¯èƒ½ã€‚æ•°æ®æ‹¥æœ‰æ–¹å’Œç®—æ³•æä¾›æ–¹å¯ä»¥åˆ†åˆ«æä¾›æ•°æ®å’Œç®—æ³•è‡³å®‰å…¨è®¡ç®—å¹³å°å®Œæˆè®¡ç®—è€Œä¸ç”¨æ‹…å¿ƒæœºå¯†æ³„éœ²çš„é—®é¢˜ã€‚

> ![](https://gw.alipayobjects.com/mdn/sofastack/afts/img/A*9bpOT6JaC5MAAAAAAAAAAAAAARQnAQ)

å®‰å…¨è®¡ç®—ä¹Ÿå¯ä»¥ä¿ƒæˆæ›´å¤šçš„æ•°æ®åˆä½œã€‚å„æ–¹æ•°æ®å¯ä»¥åœ¨ä¸€ä¸ªå®‰å…¨çš„çŽ¯å¢ƒä¸­åšèžåˆè¿ç®—ï¼Œè®©æ•°æ®äº§ç”Ÿæ›´å¤§çš„ä»·å€¼ã€‚

> ![](https://gw.alipayobjects.com/mdn/sofastack/afts/img/A*8iw9R6EK8n0AAAAAAAAAAAAAARQnAQ)

åœ¨è¾¹ç¼˜è®¡ç®—åœºæ™¯ä¸­ï¼Œè®¡ç®—èŠ‚ç‚¹éƒ¨ç½²åœ¨éžå¸¸å¤æ‚çš„çŽ¯å¢ƒä¸­ï¼Œæœºå™¨ä¸å—æŽ§ã€‚å®‰å…¨è®¡ç®—å¯ä»¥æœ‰æ•ˆåœ°ä¿æŠ¤ç”¨æˆ·æ•°æ®å’Œéšç§ã€‚

å®‰å…¨è®¡ç®—è¿™ä¹ˆå¤šçš„åº”ç”¨åœºæ™¯ï¼Œä¸ºä»€ä¹ˆè¿˜æ²¡æœ‰çœ‹åˆ°å¤§è§„æ¨¡éƒ¨ç½²å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºå®‰å…¨è®¡ç®—ç›®å‰è¿˜æœ‰ä¸€ä¸ªéžå¸¸å¤§çš„çŸ­æ¿ï¼šæ˜“ç”¨æ€§ä¸å¼ºã€‚å…·ä½“è¡¨çŽ°ä¸º 3 ç‚¹ï¼š

**åº”ç”¨åˆ†å‰²éš¾ï¼š**å°†ä¸€ä¸ªçŽ°æœ‰çš„åº”ç”¨æ”¹é€ ä¸ºä¸€ä¸ªå®‰å…¨è®¡ç®—åº”ç”¨çš„æ”¹é€ éš¾åº¦å¾ˆå¤§ã€‚éœ€è¦åšä»£ç åˆ†å‰²ã€‚

**åœºæ™¯éƒ¨ç½²éš¾ï¼š**å®‰å…¨è®¡ç®—æ˜¯è¦ä¾æ‰˜äºŽç¡¬ä»¶çš„ã€‚åœ¨å®žé™…éƒ¨ç½²ä¸­éœ€è¦å¯¹åº”ç”¨è°ƒåº¦ç³»ç»Ÿåšæ”¹é€ ã€‚

**å®‰å…¨åˆ†æžéš¾ï¼š**ä¸€ä¸ªåº”ç”¨ä½¿ç”¨äº†å®‰å…¨è®¡ç®—æ˜¯ä¸æ˜¯å°±ä¸€å®šå®‰å…¨äº†å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸ç¡®å®šã€‚è¿™éœ€è¦å¯¹æ•´ä¸ªåº”ç”¨åšéžå¸¸ç»†è‡´çš„å®‰å…¨åˆ†æžã€‚

é’ˆå¯¹è¿™äº›éš¾é¢˜ï¼Œèš‚èšé›†å›¢å’Œé˜¿é‡Œå·´å·´é›†å›¢çš„å·¥ç¨‹å¸ˆæå‡ºäº†ç‹¬åˆ°çš„è§£å†³æ–¹æ¡ˆã€‚
é¦–å…ˆæ˜¯è§£å†³åº”ç”¨åˆ†å‰²éš¾çš„é—®é¢˜ã€‚

> ![](https://gw.alipayobjects.com/mdn/sofastack/afts/img/A*yqzJQJTyfHUAAAAAAAAAAAAAARQnAQ)

èš‚èšé›†å›¢å¼€æºçš„ Occlum é¡¹ç›®åœ¨é£žåœ°ä¸­å¼€å‘äº† LibOS é€‚é…å±‚ï¼Œè®© Linux ä¸‹çš„åº”ç”¨å¯ä»¥æ— ä¿®æ”¹åœ°è¿è¡Œåœ¨ SGX çŽ¯å¢ƒä¸­ï¼Œå½»åº•è§£å†³äº†åº”ç”¨åˆ†å‰²çš„é—®é¢˜ã€‚Occlum ä½¿ç”¨ Rust è¯­è¨€å¼€å‘ï¼Œä¿è¯å†…å­˜äº†å®‰å…¨æ€§ï¼›æ”¯æŒå¤šè¿›ç¨‹å’ŒåŠ å¯†æ–‡ä»¶ç³»ç»Ÿï¼Œåº”ç”¨æ— éœ€ä¿®æ”¹ã€‚
ä¾‹å¦‚ï¼šåŸºäºŽèš‚èšé›†å›¢é‡‘èžçº§äº‘åŽŸç”Ÿæ¡†æž¶ SOFABoot å¼€å‘çš„åº”ç”¨å¯ä»¥å®Œå…¨æ— ä¿®æ”¹çš„è¿è¡Œåœ¨ Occlum çŽ¯å¢ƒä¸­ã€‚

ðŸ‘‡ç½‘ç«™é“¾æŽ¥ðŸ”—ï¼š
[https://github.com/occlum/occlum/tree/master/demos/sofaboot](https://github.com/occlum/occlum/tree/master/demos/sofaboot)

é’ˆå¯¹éƒ¨ç½²éš¾çš„é—®é¢˜ï¼Œé˜¿é‡Œäº‘æŽ¨å‡ºäº† Inclavare å¼€æºé¡¹ç›®ã€‚

> ![](https://gw.alipayobjects.com/mdn/sofastack/afts/img/A*vVYgTZ2CxbgAAAAAAAAAAAAAARQnAQ)

Inclavare åŸºäºŽ Occlumï¼Œä¸ºç”¨æˆ·æä¾›äº†å®‰å…¨è®¡ç®—å®¹å™¨ã€‚ç”¨æˆ·åªéœ€å°†å…³æ³¨çš„é‡ç‚¹æ”¾åœ¨åº”ç”¨æœ¬èº«å³å¯ï¼ŒInclavare ä¼šå°†è®¡ç®—è°ƒåº¦è‡³åˆé€‚çš„è®¡ç®—èŠ‚ç‚¹ã€‚
é’ˆå¯¹å®‰å…¨åˆ†æžéš¾ï¼Œèš‚èšé›†å›¢çš„ MORSE å¤šæ–¹å®‰å…¨è®¡ç®—å¼•æ“Žå’Œ MYTF åŒºå—é“¾è®¡ç®—å¹³å°åˆ†åˆ«ä¸ºä¸åŒçš„è®¡ç®—åœºæ™¯æä¾›äº†è§£å†³æ–¹æ¡ˆã€‚ç”¨æˆ·æ— éœ€å†æ‰¿æ‹…é«˜æ˜‚çš„å®‰å…¨åˆ†æžæˆæœ¬ã€‚

> ![](https://gw.alipayobjects.com/mdn/sofastack/afts/img/A*3W1qQ60TN9cAAAAAAAAAAAAAARQnAQ)

> ![](https://gw.alipayobjects.com/mdn/sofastack/afts/img/A*7_UWQLOnt9QAAAAAAAAAAAAAARQnAQ)

èš‚èšé›†å›¢åœ¨å®‰å…¨è®¡ç®—é¢†åŸŸæŒç»­æŠ•å…¥ï¼Œç”¨ç§‘æŠ€çš„åŠ›é‡æ¥ä¿æŠ¤æ•°æ®å®‰å…¨ï¼Œä¿æŠ¤ç”¨æˆ·éšç§ï¼Œç»™ç”¨æˆ·æä¾›æ›´å®‰å…¨çš„æœåŠ¡ã€‚èš‚èšé›†å›¢å¼€æºäº† TEE å®‰å…¨ LibOS Occlumã€‚
ç”¨æˆ·å¯ä»¥åœ¨ [https://github.com/occlum/occlum]( https://github.com/occlum/occlum) æ‰¾åˆ°æ‰€æœ‰çš„å®žçŽ°ä»£ç ã€‚ç”¨æˆ·æ—¢å¯ä»¥å®¡æŸ¥ Occlum çš„æºä»£ç ï¼Œä»¥ç¡®ä¿æ•´ä½“æ–¹æ¡ˆçš„å®‰å…¨æ€§ï¼›ä¹Ÿå¯ä»¥å‚è€ƒå·²æœ‰çš„ demo æ¥å­¦ä¹  Occlum çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¿«é€Ÿä¸Šæ‰‹å®‰å…¨è®¡ç®—ã€‚

### æœ¬å‘¨æŽ¨èé˜…è¯»

- [èš‚èšäº‘åŽŸç”Ÿåº”ç”¨è¿è¡Œæ—¶çš„æŽ¢ç´¢å’Œå®žè·µ - ArchSummit ä¸Šæµ·](https://mp.weixin.qq.com/s?__biz=MzUzMzU5Mjc1Nw==&mid=2247487717&idx=1&sn=ca9452cdc10989f61afbac2f012ed712&chksm=faa0ff3fcdd77629d8e5c8f6c42af3b4ea227ee3da3d5cdf297b970f51d18b8b1580aac786c3&scene=21)

- [å¸¦ä½ èµ°è¿›äº‘åŽŸç”ŸæŠ€æœ¯ï¼šäº‘åŽŸç”Ÿå¼€æ”¾è¿ç»´ä½“ç³»æŽ¢ç´¢å’Œå®žè·µ](https://mp.weixin.qq.com/s?__biz=MzUzMzU5Mjc1Nw==&mid=2247488044&idx=1&sn=ef6300d4b451723aa5001cd3deb17fbc&chksm=faa0fdf6cdd774e03ccd9130099674720a81e7e109ecf810af147e08778c6582636769646490&scene=21)

- [ç¨³å®šæ€§å¤§å¹…åº¦æå‡ï¼šSOFARegistry v6 æ–°ç‰¹æ€§ä»‹ç»](https://mp.weixin.qq.com/s?__biz=MzUzMzU5Mjc1Nw==&mid=2247488131&idx=1&sn=cd0b101c2db86b1d28e9f4fe07b0446e&chksm=faa0fd59cdd7744f14deeffd3939d386cff6cecdde512aa9ad00cef814c033355ac792001377&scene=21)

- [é‡‘èžçº§èƒ½åŠ›æˆæ ¸å¿ƒç«žäº‰åŠ›ï¼ŒæœåŠ¡ç½‘æ ¼é©±åŠ¨ä¼ä¸šåˆ›æ–°](https://mp.weixin.qq.com/s?__biz=MzUzMzU5Mjc1Nw==&mid=2247487660&idx=1&sn=d5506969b7eb25efcbf52b45a864eada&chksm=faa0ff76cdd77660de430da730036022fff6d319244731aeee5d41d08e3a60c23af4ee6e9bb2&scene=21)

æ›´å¤šæ–‡ç« è¯·æ‰«ç å…³æ³¨â€œé‡‘èžçº§åˆ†å¸ƒå¼æž¶æž„â€å…¬ä¼—å·

> ![](https://gw.alipayobjects.com/mdn/rms_95b965/afts/img/A*s3UzR6VeQ6cAAAAAAAAAAAAAARQnAQ)
